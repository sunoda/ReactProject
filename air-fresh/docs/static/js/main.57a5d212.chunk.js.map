{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["App","useState","data","setData","counties","setCounties","records","setRecords","reverse","setReverse","useEffect","a","axios","result","sort","prev","next","PM25","cities","Set","map","record","county","fetchData","className","type","onKeyPress","event","station","after","console","log","filter","Site","indexOf","SiteSearch","target","value","onChange","city","cityChange","default","onClick","fields","title","info","label","DataCreationDate","ItemUnit","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.57a5d212.chunk.js","sourcesContent":["import './App.css';\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nfunction App() {\n  const [ data, setData ] = useState()\n  const [ counties, setCounties ] = useState()\n  const [ records, setRecords ] = useState()\n  const [ reverse, setReverse] = useState(false)\n  useEffect(() => {\n    async function fetchData(){\n      const result = await axios('https://data.epa.gov.tw/api/v1/aqx_p_02?limit=1000&api_key=9be7b239-557b-4c10-9775-78cadfc555e9&format=json');\n\n      result.data.records.sort((prev, next) => prev.PM25 - next.PM25)\n      setData({ ...result.data})\n      setRecords(result.data.records)\n      let cities = new Set(result.data.records.map(record => record.county))\n      setCounties([...cities])\n    }\n    fetchData()\n  }, [])\n  \n\n  const sortPM25 = () => {\n    setRecords(record => reverse ? record.sort((prev, next) => prev.PM25 - next.PM25) : record.sort((prev, next) => next.PM25 - prev.PM25))\n    setReverse(!reverse)\n  }\n  const cityChange = (city) => {\n    let after;\n    if(city){\n      after = data.records.filter(record => record.county === city)\n    } else {\n      after = data.records\n    }\n    setRecords(after)\n  }\n  const SiteSearch = (station) => {\n    console.log(station);\n    let after;\n    if(station) {\n      after = data.records.filter(record => record.Site.indexOf(station) >= 0)\n    } else {\n      after = data.records\n    }\n    setRecords(after)\n    console.log(data.records)\n    console.log(after)\n  }\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <div className=\"App-main\">\n          <div className=\"functionArea\">\n            <label>查詢檢測站</label>\n            <input type=\"text\" onKeyPress={(event) => SiteSearch(event.target.value)}/>\n            <select onChange={(event) => cityChange(event.target.value)}>\n              <option value=\"\" default>全部城市</option>\n              {counties?.map(county => <option value={county} key={county}>{county}</option>)}\n            </select>\n            <button onClick={sortPM25}>濃度排序</button>\n          </div>\n\n          <table>\n            <thead>\n              <tr>\n                {data?.fields.map(title => <th className=\"item\" key={title.info.label}>{title.info.label}</th>)}\n              </tr>\n            </thead>\n            <tbody>\n              {records?.map(record =>\n                <tr key={record.Site}>\n                  <td className=\"item\">{record.Site}</td>\n                  <td className=\"item\">{record.county}</td>\n                  <td className=\"item\">{record.PM25}</td>\n                  <td className=\"item\">{record.DataCreationDate}</td>\n                  <td className=\"item\">{record.ItemUnit}</td>\n                </tr>)}\n            </tbody>\n          </table>\n          {/* <div className=\"title\">\n            {data?.fields.map(title => <div className=\"title\" key={title.info.label}>{title.info.label}</div>)}\n          </div>\n          {records?.map(record => \n          <div className=\"item\" key={record.Site}>\n            <div className=\"item\">{record.Site}</div>\n            <div className=\"item\">{record.county}</div>\n            <div className=\"item\">{record.PM25}</div>\n            <div className=\"item\">{record.DataCreationDate}</div>\n            <div className=\"item\">{record.ItemUnit}</div>\n          </div>)} */}\n        </div>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}